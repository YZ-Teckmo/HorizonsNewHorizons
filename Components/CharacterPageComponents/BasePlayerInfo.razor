@using Database
@rendermode InteractiveServer
@inject HttpClient Http
@code {
    [Parameter] public Character Model { get; set; }
    [Parameter] public EventCallback<Character> ModelChanged{ get; set; }

    async Task ChangeModel()
    {
        await ModelChanged.InvokeAsync(Model);
    }

    [Parameter] public bool edit { get; set; }
}

<div class="sub-player-panel">
    <div class="player-image">
        <input class="user-img" type="image" src="../images/plusv2.png" alt="Submit">
    </div>
    <div class="player-info">
        @if (@Model.Class == "DPS")
        {
            <img class="player-class" src="@Assets["images/DPS.png"]" />
        }
        @if (@Model.Class == "TANK")
        {
            <img class="player-class" src="@Assets["images/TANK.png"]" />
        }
        @if (@Model.Class == "SUP")
        {
            <img class="player-class" src="@Assets["images/SUP.png"]" />
        }
        <p>
            Nome: @Model.Name <br>
            Level: <input type="number" value="@Model.Level" class="data-input" @bind-level="@Model.Level" @bind-level:event="oninput" @onchange="() => ChangeModel()"> <br>
            Mentor: @Model.Mentor<br>
        </p>
    </div>
</div>


@if(edit){
<div class="colors">
    <div class="color-select">
        <h1>Cor do jogador:</h1>
        <input type="color" class="color picker" value="#ffffff" @bind-color="@Model.PlayerColor" @bind-color:event="oninput" @onchange="() => ChangeModel()">
    </div>

    <div class="color-select">
        <h1>Cor da transformação:</h1>
        <input type="color" class="color picker" value="#ffffff" @bind-transformedcolor="@Model.TransformedColor" @bind-transformedcolor:event="oninput" @onchange="() => ChangeModel()">
    </div>
</div>
}

<div class="player-bars">
    <h1>Vitalidade</h1>
    <div class="bars">
        <div class="text-bar">
            <h1>80 / 100</h1>
        </div>
        <div class="life-bar" style="width:@Model.CurrentVitality;"></div>
    </div>

    <h1>Vigor</h1>
    <div class="bars">
        <div class="text-bar">
            <h1>80 / 100</h1>
        </div>
        <div class="vigor-bar" style="width:@Model.CurrentVigor;"></div>
    </div>

    <h1>Energia</h1>
    <div class="bars">
        <div class="text-bar">
            <h1>80 / 100</h1>
        </div>
        <div class="energy-bar" style="width:@Model.CurrentEnergyStats;"></div>
    </div>

    <h1>Sanidade</h1>
    <div class="bars">
        <div class="text-bar">
            <h1>80 / 100</h1>
        </div>
        <div class="sanity-bar" style="width:@Model.CurrentSanity;"></div>
    </div>

    <h1>Humanidade</h1>
    <div class="bars">
        <div class="text-bar">
            <h1>80 / 100</h1>
        </div>
        <div class="humanity-bar" style="width:@Model.CurrentHumanity;"></div>
    </div>
</div>
