@page "/character/{id:int}"
@rendermode InteractiveServer
@using Database
@inject HttpClient Http

@code {
    int Tab = 0;
    void ChangeTab(int index)
    {
        Tab = index;
    }
    [Parameter] public int id { get; set; }
    Character? Model = new();
    protected override async Task OnInitializedAsync()
    {
        Model = await Http.GetFromJsonAsync<Character>($"http://localhost:5003/api/home/getCharacter/{id}");
    }
}

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewpoint" content="with=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="@Assets["css/CharacterPage.css"]">
    <title>Origins New Horizons | @Model.Name</title>
    <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
</head>

<style>
    :root {
        --playerColor:
            @Model.PlayerColor
        ;
    }
</style>

<nav>
    <button>Fichas</button>
    <button>Informações</button>
    <button>Combate</button>
</nav>

<div class="transform-info">
    <nav class="left-nav">
        <button class="left-buttons">Padrão</button>
        <button class="left-buttons">Transformado</button>

    </nav>
    <nav class="right-nav">
        <button @onclick="(() => ChangeTab(0))">Especialidades</button>
        <button @onclick="(() => ChangeTab(1))">Combate</button>
        <button @onclick="(() => ChangeTab(2))">Status</button>
        <button @onclick="(() => ChangeTab(3))">Habilidades</button>
        <button @onclick="(() => ChangeTab(4))">Informações</button>
    </nav>
</div>

<div class="panels">
    <div class="player-panel">
        <div class="player-image">
            <input class="user-img" type="image" src="../images/plusv2.png" alt="Submit">
        </div>
        <div class="player-info">
            <input class="player-class" type="image" src="../images/dpsIcon.png">
            <p>
                Nome: @Model.Name <br>
                Level: @Model.Level<br>
                Mentor: @Model.Mentor<br>
            </p>
        </div>
    </div>

    <div class="player-status">

        @if (Tab == 0)
        {
            <Speciality id="@id" />
        }

        @if (Tab == 1)
        {
            <Combat id="@id" />
        }

        @if (Tab == 2)
        {
            <Stats id="@id" />
        }

        @if (Tab == 3)
        {
            <Habilities id="@id" />
        }

        @if (Tab == 4)
        {
            <Information id="@id" />
        }
    </div>
</div>
